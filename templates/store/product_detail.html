{% extends "base.html" %}
{% load static %}
{% load form_tags %}
{% load store_filters %}


{% block title %}
    {{ product.name }} | {{ product.sub_category.name }} | {{ product.sub_category.category.name }}
{% endblock %}



{% block content %}



        <!-- breadcrumb -->
        <div class="tf-breadcrumb">
            <div class="container">
                <div class="tf-breadcrumb-wrap d-flex justify-content-between flex-wrap align-items-center">
                    <div class="tf-breadcrumb-list">
                        <a href="{% url 'store:store_main' product.sub_category.category.main_category.slug %}" class="text">
                            {{ product.sub_category.category.main_category.name }}
                        </a>
                        <i class="icon icon-arrow-right"></i>
                        <a href="{% url 'store:store_category' product.sub_category.category.main_category.slug product.sub_category.category.slug %}" class="text">
                            {{ product.sub_category.category.name }}
                        </a>
                        <i class="icon icon-arrow-right"></i>
                        <a href="{% url 'store:store_subcategory' product.sub_category.category.main_category.slug product.sub_category.category.slug product.sub_category.slug %}" class="text">
                            {{ product.sub_category.name }}
                        </a>
                        <i class="icon icon-arrow-right"></i>
                        <span class="text">{{ product.name }}</span>
                    </div>
                    
                </div>
            </div>
        </div>
        <!-- /breadcrumb -->
        <!-- default -->
        <section class="flat-spacing-4 pt_0">
            <div class="tf-main-product section-image-zoom">
                <div class="container">
                    <div class="row">
                        <div class="col-md-6">
                            
                                                
                            <div class="tf-product-media-wrap sticky-top">
                                <div class="thumbs-slider">
                                    <div dir="ltr" class="swiper tf-product-media-thumbs other-image-zoom"
                                        data-direction="vertical">
                                        <div class="swiper-wrapper stagger-wrap">

                                            
                                                {% for image in images %}
                                                    <!-- beige -->
                                                    <div class="swiper-slide stagger-item">
                                                        <div class="item">
                                                            <img class="lazyload"
                                                                data-src="{{ image.image.url }}"
                                                                src="{{ image.image.url }}" alt="{{ image.alt_text }}">
                                                        </div>
                                                    </div>
                                                {% endfor %}
                                           

                                            
                                        </div>
                                    </div>
                                    <div dir="ltr" class="swiper tf-product-media-main" id="gallery-swiper-started">
                                        <div class="swiper-wrapper">

                                           

                                                {% for image in images %}
                                                <!-- beige -->
                                                <div class="swiper-slide">
                                                    <a href="{{ image.image.url }}" target="_blank" class="item"
                                                        data-pswp-width="770px" data-pswp-height="1075px">
                                                        <img class="tf-image-zoom lazyload"
                                                            data-zoom="{{ image.image.url }}"
                                                            data-src="{{ image.image.url }}"
                                                            src="{{ image.image.url }}" alt="{{ image.alt_text }}">
                                                    </a>
                                                </div>
                                                {% endfor %}
                                         


                                        </div>

                                        <div class="swiper-button-next button-style-arrow thumbs-next"></div>
                                        <div class="swiper-button-prev button-style-arrow thumbs-prev"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="tf-product-info-wrap position-relative">
                                <div class="tf-zoom-main"></div>
                                <div class="tf-product-info-list other-image-zoom">
                                    <div class="tf-product-info-title">
                                        <h5>{{ product.name }}</h5>
                                    </div>

                                

                                    
                                    <div class="tf-product-info-price">
                                        {% if product.discounted_price %}
                                        <div class="price-on-sale" style="color: #333 !important;">${{ product.discounted_price }}</div>
                                        <div class="compare-at-price">${{ product.price }}</div>
                                        {% else %}
                                        <div class="price-on-sale" style="color: #333 !important;">${{ product.price }}</div>
                                        {% endif %}
                                        
                                        

                                        
                                    </div>
                                    <div class="tf-product-info-liveview">
                                        <div class="liveview-count">{{ total_views }}</div>
                                        <p class="fw-6">People are viewing this right now</p>
                                    </div>

                                    <!-- coutdown timing -->

                                    {% if timer > 0 %}
                                    <div class="tf-product-info-countdown">
                                        <div class="countdown-wrap">
                                            <div class="countdown-title">
                                                <i class="icon-time tf-ani-tada"></i>
                                                <p>HURRY UP! SALE ENDS IN:</p>
                                            </div>

                                            
                                            <div class="tf-countdown style-1">
                                                <div class="js-countdown" data-timer="{{ timer }}"
                                                    data-labels="Days :,Hours :,Mins :,Secs"></div>
                                            </div>
                                           

                                        </div>
                                    </div>

                                    {% endif %}
                                   


                                    
                                               
                  <form action="{% url 'cart:cart_add' product.id %}" method="post" id="product-form">
                    <div style="display: none;">
                        {{ cart_product_form }}
                    </div>
                        {% csrf_token %}


                        <input type="hidden" name="monogram_price" id="monogram-price-hidden" value="0">
                        <input type="hidden" name="shirt_monogram_price" id="shirt-monogram-price-hidden" value="0">
                        <input type="hidden" name="vest_price" id="vest-price-hidden" value="0">
                        <input type="hidden" name="shirt_price" id="shirt-price-hidden" value="0">

                                                                        
  

                        <!-- Included Items Info -->
                        {% if product.pieces.exists %}
                            <div class="included-items mb-2">
                            <h6><strong>Included Items:</strong>
                            {{ product.pieces.all|join:", " }}
                            </h6>
                            </div>
                        {% endif %}

                       

                        <!-- Set Items Dropdown -->
                        {% if set_items %}
                            <label for="set-items">Select To Customize</label>
                            <select name="set_items" id="set-items" class="form-select border-dark">
                            {% for option in set_items %}
                                <option 
                                value="{{ option.id }}" 
                                data-price="{{ option.price_difference }}" 
                                data-target="{{ option.name|lower }}"
                                {% if option.included_by_default %}selected{% endif %}>
                                {{ option.name }}
                                </option>
                            {% endfor %}
                            </select>
                        {% endif %}

                        <!-- Customize Toggle -->
                        <div class="mt-2">
                            <button type="button" id="customize-toggle" class="btn btn-dark">
                            CUSTOMIZE
                            </button>
                        </div>
                        <br/>

                        <!-- Customization Fields -->
                        <div id="customization-fields" style="display: none; margin-top: 15px;">
                            {% for target_item, option_groups in customizations.items %}
                        <div class="customization-group" data-target="{{ target_item }}" style="display: none;">
                            <h5 class="mt-3 text-capitalize">{{ target_item }} Customizations</h5>



                            {% for key, options in option_groups.items %}
                            



                            {% if key not in monogram_keys %}
                                <div class="variation-accordion mb-3">
                                <button class="btn btn-outline-secondary w-100 text-start variation-toggle" type="button"
                                        data-bs-toggle="collapse"
                                        data-bs-target="#variation-{{ target_item }}-{{ key|slugify }}"
                                        aria-expanded="false">
                                    {{ key|title }}
                                </button>


                                <div class="collapse mt-2 {% if forloop.first %}show{% endif %}" id="variation-{{ target_item }}-{{ key|slugify }}">
                                    <div class="row g-3 mt-2">
                                    {% for option in options %}
                                        <div class="col-6 col-sm-4 col-md-3">
                                        <label class="w-100 text-center border rounded p-2 d-flex flex-column align-items-center justify-content-between h-100">
                                            <input type="radio" 
                                                name="{{ target_item }}_{{ key }}" 
                                                value="{{ option.id }}" 
                                                data-price="{{ option.price_difference }}"
                                                {% if option.included_by_default %}checked{% endif %}
                                                class="visually-hidden variation-radio">

                                            {% if option.image %}
                                            <img src="{{ option.image.url }}" alt="{{ option.name }}" class="img-fluid mb-2" style="max-height: 140px;">
                                            {% else %}
                                            <div class="bg-secondary text-white p-2 mb-2">No Image</div>
                                            {% endif %}

                                            <div class="small">

                                                

                                            {{ option.name }}
                                            {% if option.price_difference %}
                                                <span class="text-muted">(+{{ option.price_difference }} {{ currency_symbol|default:"$" }})</span>
                                                <input type="hidden" 
                                                    name="{{ target_item }}_{{ key|slugify }}_{{ option.id }}_price" 
                                                    value="{{ option.price_difference }}" >
                                            {% endif %}
                                            </div>



                                            
                                        </label>
                                        </div>
                                    {% endfor %}
                                    </div>
                                </div>
                                </div>
                            {% endif %}
                            {% endfor %}

                           

                            {% if target_item|lower == "jacket" %}
                            <!-- MONOGRAM OPTIONS (Only for Jacket) -->

                            

                                <!-- monogram checkbox -->
                                <div class="form-check my-3">
                                    <!-- Hidden input to store monogram price -->
                                    
                                    <input type="checkbox" name="jacket_monogram_selected" class="form-check-input custom-checkbox" value="on" id="enable-jacket-monogram" data-price="{{ monogram_price }}">

                                    <label class="form-check-label" for="enable-jacket-monogram">
                                    Add Monogram (+${{ monogram_price }})
                                    </label>
                                </div>
                            

                                <div id="jacket-monogram-fields" style="display: none;">
                                    <ul class="nav nav-tabs my-3" id="jacket-monogramTabs" role="tablist">
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link active" id="jacket-initials-tab" data-bs-toggle="tab" data-bs-target="#jacket-initials" type="button" role="tab">
                                        Initials
                                        </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="jacket-style-tab" data-bs-toggle="tab" data-bs-target="#jacket-style" type="button" role="tab">
                                        Style
                                        </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="jacket-color-tab" data-bs-toggle="tab" data-bs-target="#jacket-color" type="button" role="tab">
                                        Color
                                        </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="jacket-placement-tab" data-bs-toggle="tab" data-bs-target="#jacket-placement" type="button" role="tab">
                                        Placement
                                        </button>
                                    </li>
                                    </ul>

                                    <div class="tab-content border rounded p-3" id="monogramTabContent">

                                            <!-- Initials -->
                                    <div class="tab-pane fade show active" id="jacket-initials-tab" data-bs-target="#jacket-initials" role="tabpanel">
                                        <label for="jacket_monogram_text" class="form-label">Enter Initials (max 10 characters):</label>
                                        <input type="text" maxlength="10" name="jacket_monogram_text" id="jacket_monogram_text" class="form-control">
                                    </div>

                            


                                    <!-- Style -->
                                    <div class="tab-pane fade" id="jacket-style" role="tabpanel">
                                        
                                        {% with target_customizations=customizations|get_item:"monogram" %}
                                        {% with monogram_style=target_customizations|get_item:"monogram style" %}
                                            {% if monogram_style %}
                                            {% for option in monogram_style %}
                                                <div class="form-check">
                                                <input class="form-check-input" type="radio" name="jacket_monogram_style" id="jacket-style-{{ option.id }}" value="{{ option.id }}" >
                                                <label class="form-check-label" for="style-{{ option.id }}">
                                                    {{ option.name }}
                                                </label>
                                                </div>
                                            {% endfor %}
                                            {% endif %}
                                        {% endwith %}
                                        {% endwith %}
                                    </div>

                                    <!-- Color -->
                                    <div class="tab-pane fade" id="jacket-color" role="tabpanel">
                                        {% with target_customizations=customizations|get_item:"monogram" %}
                                        {% with monogram_color=target_customizations|get_item:"monogram color" %}
                                            {% if monogram_color %}
                                            {% for option in monogram_color %}
                                                <div class="form-check">
                                                <input class="form-check-input" type="radio" name="jacket_monogram_color" id="jacket-color-{{ option.id }}" value="{{ option.id }}">
                                                <label class="form-check-label" for="color-{{ option.id }}">
                                                    {{ option.name }}
                                                </label>
                                                </div>
                                            {% endfor %}
                                            {% endif %}
                                        {% endwith %}
                                        {% endwith %}
                                    </div>

                                    <!-- Placement -->
                                    <div class="tab-pane fade" id="jacket-placement" role="tabpanel">
                                        {% with target_customizations=customizations|get_item:"monogram" %}
                                        {% with monogram_placement=target_customizations|get_item:"monogram placement" %}
                                            {% if monogram_placement %}
                                            {% for option in monogram_placement %}
                                                <div class="form-check">
                                                <input class="form-check-input" type="radio" name="jacket_monogram_placement" id="jacket-placement-{{ option.id }}" value="{{ option.id }}">
                                                <label class="form-check-label" for="placement-{{ option.id }}">
                                                    {{ option.name }}
                                                </label>
                                                </div>
                                            {% endfor %}
                                            {% endif %}
                                        {% endwith %}
                                        {% endwith %}
                                    </div>

                                    </div>
                                </div>
                                {% endif %}






                                {% if target_item|lower == "shirt" %}
                            <!-- MONOGRAM OPTIONS (Only for Shirt) -->

                                <!-- monogram checkbox -->
                                <div class="form-check my-3">
                                    <input type="checkbox" name="shirt_monogram_selected" class="form-check-input custom-checkbox" value="on" id="enable-shirt-monogram" data-price="{{ monogram_price }}">
                                    <label class="form-check-label" for="enable-shirt-monogram">
                                    Add Monogram (+${{ monogram_price }})
                                    </label>
                                </div>
    

                                <div id="shirt-monogram-fields" style="display: none;">
                                    <ul class="nav nav-tabs my-3" id="shirt-monogramTab" role="tablist">
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link active" id="shirt_initials_tab" data-bs-toggle="tab" data-bs-target="#shirt-initials" type="button" role="tab">
                                        Initials
                                        </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="shirt-style-tab" data-bs-toggle="tab" data-bs-target="#shirt-style" type="button" role="tab">
                                        Style
                                        </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="shirt-color-tab" data-bs-toggle="tab" data-bs-target="#shirt-color" type="button" role="tab">
                                        Color
                                        </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="shirt-placement-tab" data-bs-toggle="tab" data-bs-target="#shirt-placement" type="button" role="tab">
                                        Placement
                                        </button>
                                    </li>
                                    </ul>

                                    <div class="tab-content border rounded p-3" id="monogramTabContent">

                                            <!-- Initials -->
                                    <div class="tab-pane fade show active" id="shirt_initials_tab" data-bs-target="#shirt-initials" role="tabpanel">
                                        <label for="shirt_monogram_text" class="form-label">Enter Initials (max 5 characters):</label>
                                        <input type="text" maxlength="5" name="shirt_monogram_text" id="shirt_monogram_text" class="form-control">
                                    </div>

                            


                                <!-- Style -->
                                    <div class="tab-pane fade" id="shirt-style" role="tabpanel">
                                        {% with monogram_data=customizations|get_item:"monogram" %}
                                            {% with monogram_style=monogram_data|get_item:"shirt monogram style" %}
                                                {% if monogram_style %}
                                                <div class="d-flex flex-wrap gap-3">
                                                    {% for option in monogram_style %}
                                                        <div class="form-check text-center">
                                                            <input class="form-check-input d-none" type="radio" name="shirt_monogram_style" id="shirt-style-{{ option.id }}" value="{{ option.id }}">
                                                            
                                                            <!-- Add class "style-option" here -->
                                                            <label class="form-check-label style-option" for="shirt-style-{{ option.id }}">
                                                                <img src="{{ option.image.url }}" alt="{{ option.name }}" class="img-thumbnail" style="width: 80px; height: auto;">
                                                                <div class="mt-1">{{ option.name }}</div>
                                                            </label>
                                                        </div>
                                                    {% endfor %}
                                                </div>
                                            {% endif %}

                                            {% endwith %}
                                        {% endwith %}
                                    </div>


                                    <!-- Color -->
                                    <div class="tab-pane fade" id="shirt-color" role="tabpanel">
                                        {% with monogram_data=customizations|get_item:"monogram" %}
                                            {% with monogram_color=monogram_data|get_item:"shirt monogram color" %}
                                               {% if monogram_color %}
                                                    <div class="d-flex flex-wrap gap-3">
                                                        {% for option in monogram_color %}
                                                            <div class="form-check text-center">
                                                                <input class="form-check-input d-none" type="radio" name="shirt_monogram_color" id="shirt-color-{{ option.id }}" value="{{ option.id }}">
                                                                
                                                                <!-- Use correct 'for' value and class -->
                                                                <label class="form-check-label color-option" for="shirt-color-{{ option.id }}">
                                                                    <img src="{{ option.image.url }}" alt="{{ option.name }}" class="img-thumbnail" style="width: 40px; height: auto;">
                                                                    <div class="mt-1">{{ option.name }}</div>
                                                                </label>
                                                            </div>
                                                        {% endfor %}
                                                    </div>
                                                {% endif %}

                                            {% endwith %}
                                        {% endwith %}
                                    </div>



                                    <!-- Placement -->
                                    <div class="tab-pane fade" id="shirt-placement" role="tabpanel">
                                        {% with monogram_data=customizations|get_item:"monogram" %}
                                        {% with placement_options=monogram_data|get_item:"shirt monogram placement" %}
                                            {% if placement_options %}
                                            {% for option in placement_options %}
                                                <div class="form-check">
                                                <input class="form-check-input" type="radio" name="shirt_monogram_placement" id="shirt-placement-{{ option.id }}" value="{{ option.id }}">
                                                <label class="form-check-label" for="placement-{{ option.id }}">
                                                    {{ option.name }}
                                                </label>
                                                </div>
                                            {% endfor %}
                                            {% endif %}
                                        {% endwith %}
                                        {% endwith %}

                                    </div>

            


                                        </div>
                                    </div>
                                    {% endif %}

    

                                    </div> <!-- ← closes .customization-group -->
                                    {% endfor %}

                                    </div> <!-- closes #customization-fields -->



                                        {% if not is_shirt_product %}

                                        <!-- VEST TOGGLE OUTSIDE CUSTOMIZATION SECTION -->
                                        <div class="form-check my-4">
                                        <input type="checkbox" name="vest_selected" value="on" class="form-check-input custom-checkbox" id="enable-vest-customization" data-price="{{ vest_price }}">
                                        <label class="form-check-label" for="enable-vest-customization">
                                            Add a Vest (+${{ vest_price }})
                                        </label>
                                        </div>

                                        <div id="vest-customization-fields" style="display: none;">
                                        <div class="card border shadow-sm">
                                            <div class="card-header bg-light">
                                            <strong>Vest</strong>
                                            </div>
                                            <div class="card-body">
                                            {% with target_customizations=customizations|get_item:"vest" %}
                                                {% with vest_style=target_customizations|get_item:"vest" %}
                                                {% if vest_style %}
                                                    <div class="mb-3">
                                                    <label class="form-label">Vest Style:</label>
                                                    <div class="row g-3">
                                                        {% for option in vest_style %}
                                                        <div class="col-6 col-md-4 col-lg-3">
                                                            <div class="border rounded p-2 text-center h-100">
                                                            <input class="form-check-input d-block mx-auto mb-2" type="radio" name="vest_style" id="vest-style-{{ option.id }}" value="{{ option.id }}" data-price="{{ option.price }}">
                                                            <label class="form-check-label d-block" for="vest-style-{{ option.id }}">
                                                                {% if option.image %}
                                                                <img src="{{ option.image.url }}" alt="{{ option.name }}" class="img-fluid mb-2" style="max-height: 120px; cursor: zoom-in;" onclick="showZoomModal(this)">
                                                                {% else %}
                                                                <div class="bg-light border rounded p-3 mb-2">No Image</div>
                                                                {% endif %}
                                                                <div>{{ option.name }}</div>
                                                            </label>
                                                            </div>
                                                        </div>
                                                        {% endfor %}
                                                    </div>
                                                    </div>
                                                {% endif %}
                                                {% endwith %}
                                            {% endwith %}
                                            </div>
                                        </div>
                                        </div>


                                        <!-- Shirt TOGGLE OUTSIDE CUSTOMIZATION SECTION -->
                                        <div class="form-check my-4">
                                        <input type="checkbox" name="shirt_selected" value="on" class="form-check-input custom-checkbox" id="enable-shirt-customization" data-price="{{ shirt_price }}">
                                        <label class="form-check-label" for="enable-shirt-customization">
                                            Add a Shirt (+${{ shirt_price }})
                                        </label>
                                        </div>

                                        <div id="shirt-customization-fields" style="display: none;">
                                        <div class="card border shadow-sm">
                                            <div class="card-header bg-light">
                                            <strong>Shirt</strong>
                                            </div>
                                            <div class="card-body">
                                            {% with target_customizations=customizations|get_item:"shirt" %}
                                                {% with shirt_style=target_customizations|get_item:"shirt" %}
                                                {% if shirt_style %}
                                                    <div class="mb-3">
                                                    <label class="form-label">Shirt Options:</label>
                                                    <div class="row g-3">
                                                        {% for option in shirt_style %}
                                                        <div class="col-6 col-md-4 col-lg-3">
                                                            <div class="border rounded p-2 text-center h-100">
                                                            <input class="form-check-input d-block mx-auto mb-2" type="radio" name="shirt_style" id="shirt-style-{{ option.id }}" value="{{ option.id }}" data-price="{{ option.price }}">
                                                            <label class="form-check-label d-block" for="shirt-style-{{ option.id }}">
                                                                {% if option.image %}
                                                                <img src="{{ option.image.url }}" alt="{{ option.name }}" class="img-fluid mb-2" style="max-height: 120px; cursor: zoom-in;" onclick="showZoomModal(this)">
                                                                {% else %}
                                                                <div class="bg-light border rounded p-3 mb-2">No Image</div>
                                                                {% endif %}
                                                                <div>{{ option.name }}</div>
                                                            </label>
                                                            </div>
                                                        </div>
                                                        {% endfor %}
                                                    </div>
                                                    </div>
                                                {% endif %}
                                                {% endwith %}
                                            {% endwith %}
                                            </div>
                                        </div>
                                        </div>

                                        {% endif %}
                                       
                                        </div>
                                    </div>
                                    <br/>                               
                                   
                                    
                                    <div class="tf-product-info-buy-button">        
                                        <button type="submit" class="tf-btn btn-fill justify-content-center fw-6 fs-16 flex-grow-1 animate-hover-btn btn-add-to-cart">
                                            
                                            <span>Add to cart -&nbsp;</span>
                                             <span class="tf-qty-price total-price" id="total-price">
                                                        {% if product.discounted_price %}
                                                            {{ product.discounted_price }}
                                                        {% else %}
                                                            {{ product.price }}
                                                        {% endif %}
                                                    </span>
                                        </button>
                                                <br/><br/>

                                            
                                           

                                            
                                               
                                            
                                            
                                    </form> <!--  form closing tag -->


                                    </div>

                                    <!-- Image Preview -->
                                    <div class="variation-preview my-2">
                                    <img id="variation-preview-img" src="" alt="" style="max-height: 100px; display: none;">
                                    </div>

                                     <br/>

                                    <div class="tf-product-info-extra-link">
                                        
                                        <a href="#ask_question" data-bs-toggle="modal" class="tf-product-extra-icon">
                                            <div class="icon">
                                                <i class="icon-question"></i>
                                            </div>
                                            <div class="text fw-6">Ask a question</div>
                                        </a>
                                        <a href="#delivery_return" data-bs-toggle="modal" class="tf-product-extra-icon">
                                            <div class="icon">
                                                <svg class="d-inline-block" xmlns="http://www.w3.org/2000/svg"
                                                    width="22" height="18" viewBox="0 0 22 18" fill="currentColor">
                                                    <path
                                                        d="M21.7872 10.4724C21.7872 9.73685 21.5432 9.00864 21.1002 8.4217L18.7221 5.27043C18.2421 4.63481 17.4804 4.25532 16.684 4.25532H14.9787V2.54885C14.9787 1.14111 13.8334 0 12.4255 0H9.95745V1.69779H12.4255C12.8948 1.69779 13.2766 2.07962 13.2766 2.54885V14.5957H8.15145C7.80021 13.6052 6.85421 12.8936 5.74468 12.8936C4.63515 12.8936 3.68915 13.6052 3.33792 14.5957H2.55319C2.08396 14.5957 1.70213 14.2139 1.70213 13.7447V2.54885C1.70213 2.07962 2.08396 1.69779 2.55319 1.69779H9.95745V0H2.55319C1.14528 0 0 1.14111 0 2.54885V13.7447C0 15.1526 1.14528 16.2979 2.55319 16.2979H3.33792C3.68915 17.2884 4.63515 18 5.74468 18C6.85421 18 7.80021 17.2884 8.15145 16.2979H13.423C13.7742 17.2884 14.7202 18 15.8297 18C16.9393 18 17.8853 17.2884 18.2365 16.2979H21.7872V10.4724ZM16.684 5.95745C16.9494 5.95745 17.2034 6.08396 17.3634 6.29574L19.5166 9.14894H14.9787V5.95745H16.684ZM5.74468 16.2979C5.27545 16.2979 4.89362 15.916 4.89362 15.4468C4.89362 14.9776 5.27545 14.5957 5.74468 14.5957C6.21392 14.5957 6.59575 14.9776 6.59575 15.4468C6.59575 15.916 6.21392 16.2979 5.74468 16.2979ZM15.8298 16.2979C15.3606 16.2979 14.9787 15.916 14.9787 15.4468C14.9787 14.9776 15.3606 14.5957 15.8298 14.5957C16.299 14.5957 16.6809 14.9776 16.6809 15.4468C16.6809 15.916 16.299 16.2979 15.8298 16.2979ZM18.2366 14.5957C17.8853 13.6052 16.9393 12.8936 15.8298 12.8936C15.5398 12.8935 15.252 12.943 14.9787 13.04V10.8511H20.0851V14.5957H18.2366Z">
                                                    </path>
                                                </svg>
                                            </div>
                                            <div class="text fw-6">Delivery & Return</div>
                                        </a>
                                        <a href="#share_social" data-bs-toggle="modal" class="tf-product-extra-icon">
                                            <div class="icon">
                                                <i class="icon-share"></i>
                                            </div>
                                            <div class="text fw-6">Share</div>
                                        </a>
                                    </div>
                                    <div class="tf-product-info-delivery-return">
                                        <div class="row">
                                            <div class="col-xl-6 col-12">
                                                <div class="tf-product-delivery">
                                                    <div class="icon">
                                                        <i class="icon-delivery-time"></i>
                                                    </div>
                                                    <p>Estimate delivery times: <span class="fw-7">12-26 days</span>
                                                        (International), <span class="fw-7">3-6 days</span> (United
                                                        States).</p>
                                                </div>
                                            </div>
                                            <div class="col-xl-6 col-12">
                                                <div class="tf-product-delivery mb-0">
                                                    <div class="icon">
                                                        <i class="icon-return-order"></i>
                                                    </div>
                                                    <p>Return within <span class="fw-7">30 days</span> of purchase.
                                                        Duties & taxes are non-refundable.</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tf-product-info-trust-seal">
                                        <div class="tf-product-trust-mess">
                                            <i class="icon-safe"></i>
                                            <p class="fw-6">Guarantee Safe <br> Checkout</p>
                                        </div>
                                        <div class="tf-payment">
                                            <img src="{% static 'images/payments/visa.png' %}" alt="">
                                            <img src="{% static 'images/payments/img-1.png' %}" alt="">
                                            <img src="{% static 'images/payments/img-2.png' %}" alt="">
                                            <img src="{% static 'images/payments/img-3.png' %}" alt="">
                                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
           
        </section>
        <!-- /default -->


        <!-- tabs -->
        <section class="flat-spacing-17 pt_0">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="widget-tabs style-has-border">
                            <ul class="widget-menu-tab">
                                <li class="item-title active">
                                    <span class="inner">Description</span>
                                </li>
                                <li class="item-title">
                                    <span class="inner">Additional Information</span>
                                </li>
                                <li class="item-title">
                                    <span class="inner">Review</span>
                                </li>
                                <li class="item-title">
                                    <span class="inner">Shipping</span>
                                </li>
                                <li class="item-title">
                                    <span class="inner">Return Policies</span>
                                </li>
                            </ul>
                            <div class="widget-content-tab">
                               



<div class="widget-content-inner active">
  <div>
    {# Render rich description with safe to allow HTML #}
    <p class="mb_30">
      {{ product.description|safe }}
    </p>
<br/>
    <div class="tf-product-des-demo">
      <div class="right">
        <h3 class="fs-16 fw-5">Features</h3>
        <ul>
          {% for feature in product.features.all %}
            <li>{{ feature.text }}</li>
          {% empty %}
            <li>No features listed.</li>
          {% endfor %}
        </ul>

        <h3 class="fs-16 fw-5">Materials Care</h3>
        <ul class="mb-0">
          {% for care_item in product.material_care_items.all %}
            <li>{{ care_item.description }}</li>
          {% empty %}
            <li>No materials care info.</li>
          {% endfor %}
        </ul>
      </div>




    </div>
  </div>
</div>







                                <div class="widget-content-inner">

                                    {% regroup product.piece_specs.all by piece as piece_groups %}

{% for group in piece_groups %}
  {% if group.grouper in product.pieces.all %}
    <h5 class="tf-attr-section-title mb_10">{{ group.grouper.name }} Details</h5>

    <table class="tf-pr-attrs mb_30">
      <tbody>
        {% for spec in group.list %}
          <tr class="tf-attr-row">
            <th class="tf-attr-label">{{ spec.label }}</th>
            <td class="tf-attr-value">
              <p>{{ spec.value }}</p>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}
{% endfor %}


                                </div>













                                <!-- tab review -->

<div class="widget-content-inner">
    <div class="tab-reviews write-cancel-review-wrap">

        <div class="tab-reviews-heading">
            <div class="top">


                {# Average rating & star bar --------------------------------------------- #}
<div class="text-center">

    {# numeric value ------------------------------------------------------ #}
    <h1 class="number fw-6">
        {{ average_rating|floatformat:1|default:"0.0" }}
    </h1>

    {# star icons --------------------------------------------------------- #}
    <div class="list-star" style="color:#f5c518;">
        {% with rating=average_rating %}
            {% for i in "12345" %}
                {% if rating >= forloop.counter %}
                    <i class="fa-solid fa-star"></i>
                {% elif rating >= forloop.counter|add:"-0.5" %}
                    <i class="fa-solid fa-star-half-stroke"></i>
                {% else %}
                    <i class="fa-regular fa-star"></i>
                {% endif %}
            {% endfor %}
        {% endwith %}
    </div>

    {# total-review count -------------------------------------------------- #}
    <p>({{ total_reviews|default:"0" }} Ratings)</p>
</div>



                
                <div class="rating-score">
                    <!-- You can add dynamic rating breakdown here if available -->
                </div>
            </div>

            <div>
                <div class="tf-btn btn-outline-dark fw-6 btn-comment-review btn-cancel-review">
                    Cancel Review
                </div>
                <div class="tf-btn btn-outline-dark fw-6 btn-comment-review btn-write-review">
                    Write a review
                </div>
            </div>
        </div>

        <div class="reply-comment cancel-review-wrap">
            <div class="d-flex mb_24 gap-20 align-items-center justify-content-between flex-wrap">
                <h5 class="">{{ reviews.count }} Comments</h5>
                <div class="d-flex align-items-center gap-12">
                    <div class="text-caption-1">Sort by:</div>





                    {# ---------- review-sort dropdown (final) ---------- #}
<div class="dropdown tf-dropdown-sort">

  {# trigger ----------------------------------------------------------- #}
  <a href="#"
     class="btn-select dropdown-toggle"
     data-bs-toggle="dropdown"
     aria-expanded="false">

      <span class="text-sort-value">
          {% if sort_option == 'oldest' %}Oldest
          {% elif sort_option == 'most_popular' %}Most Popular
          {% else %}Most Recent
          {% endif %}
      </span>
      <span class="icon icon-arrow-down"></span>
  </a>

  {# menu -------------------------------------------------------------- #}
  {% with base_url=request.path %}
  <ul class="dropdown-menu">

      <li>
        <a class="select-item {% if sort_option == 'most_recent' %}active{% endif %}"
           href="{{ base_url }}?sort=most_recent">
          <span class="text-value-item">Most Recent</span>
        </a>
      </li>

      <li>
        <a class="select-item {% if sort_option == 'oldest' %}active{% endif %}"
           href="{{ base_url }}?sort=oldest">
          <span class="text-value-item">Oldest</span>
        </a>
      </li>

      <li>
        <a class="select-item {% if sort_option == 'most_popular' %}active{% endif %}"
           href="{{ base_url }}?sort=most_popular">
          <span class="text-value-item">Most Popular</span>
        </a>
      </li>

  </ul>
  {% endwith %}
</div>






                </div>
            </div>








<div id="reviews" class="reply-comment-wrap">



{% include "store/partials/review_list.html" %}



</div>




</div>

      





        <!-- review stars and comment -->
        <form id="review-form" method="post" class="form-write-review write-review-wrap" action="{% url 'store:submit_review' product.id %}">

            {% csrf_token %}
            <div class="heading">
                <h5>Write a review:</h5>
                <div class="rate">
                    <input type="radio" id="star10" name="rating" value="5" required/><label for="star10" title="5"></label>
                    <input type="radio" id="star9" name="rating" value="4.5" required/><label for="star9" title="4.5" class="half"></label>
                    <input type="radio" id="star8" name="rating" value="4" required/><label for="star8" title="4"></label>
                    <input type="radio" id="star7" name="rating" value="3.5" required/><label for="star7" title="3.5" class="half"></label>
                    <input type="radio" id="star6" name="rating" value="3" required/><label for="star6" title="3"></label>
                    <input type="radio" id="star5" name="rating" value="2.5" required/><label for="star5" title="2.5" class="half"></label>
                    <input type="radio" id="star4" name="rating" value="2" required/><label for="star4" title="2"></label>
                    <input type="radio" id="star3" name="rating" value="1.5" required/><label for="star3" title="1.5" class="half"></label>
                    <input type="radio" id="star2" name="rating" value="1" required/><label for="star2" title="1"></label>
                    <input type="radio" id="star1" name="rating" value="0.5" required/><label for="star1" title="0.5" class="half"></label>
                </div>
            </div>

            <div class="form-content">
                <fieldset class="box-field">
                    <label class="label">Review Title</label>
                    <input type="text" name="subject" placeholder="Give your review a title" required />
                </fieldset>

                <fieldset class="box-field">
                    <label class="label">Review</label>
                    <textarea name="review" rows="4" placeholder="Write your comment here" required></textarea>
                </fieldset>

                {% if not request.user.is_authenticated %}
                <div class="box-field group-2">
                    <fieldset>
                        <input type="text" placeholder="Your Name (Public)" name="name" required>
                    </fieldset>
                    <fieldset>
                        <input type="email" placeholder="Your Email (Private)" name="email" required>
                    </fieldset>
                </div>
                {% endif %}

                <div class="box-check">
                    <input type="checkbox" name="save_info" class="tf-check" id="check1">
                    <label class="text_black-2" for="check1">
                        Save my name, email, and website in this browser for the next time I comment.
                    </label>
                </div>
            </div>

            <div class="button-submit">
                <button class="tf-btn btn-fill animate-hover-btn" type="submit">
                    Submit Review
                </button>
            </div>

            {% include 'includes/alerts.html' %}
        </form>




    </div>
</div>

<!-- End of tab review -->









                                <div class="widget-content-inner">
                                   {% if shipping_policy %}
                                        <div class="tf-page-privacy-policy">
                                        <div class="title">{{ shipping_policy.title }}</div>
                                        <div class="tf-page-content">
                                            {{ shipping_policy.content|safe }}
                                        </div>
                                        </div>
                                    {% endif %}


                                </div>
                                <div class="widget-content-inner">
                                    <div class="tf-page-privacy-policy">

                                   <div class="title">{{ return_policy.title }}</div>
                                     {% if return_policy %}
                                        
                                        <div class="tf-page-content">
                                            {{ return_policy.content|safe }}
                                        </div>
                                    {% else %}
                                        <div>Return policy not found</div>
                                    {% endif %}



                                    
                                       
                                    </div>
                                    <p class="text-center text-paragraph">LT01: 70% wool, 15% polyester, 10% polyamide,
                                        5% acrylic 900 Grms/mt</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- /tabs -->



{% if recommended_products %}
        <!-- Recommendation product section -->
        <section class="flat-spacing-1 pt_0">
            <div class="container">
                <div class="flat-title">
                    <span class="title">People Also Bought</span>
                </div>
                <div class="hover-sw-nav hover-sw-2">
                    <div dir="ltr" class="swiper tf-sw-product-sell wrap-sw-over" data-preview="4" data-tablet="3"
                        data-mobile="2" data-space-lg="30" data-space-md="15" data-pagination="2" data-pagination-md="3"
                        data-pagination-lg="3">
                        <div class="swiper-wrapper">






                    <div class="swiper-slide" lazy="true">
    <div class="card-product">
        <div class="card-product-wrapper">
            <a href="{{ product.get_absolute_url }}" class="product-img">
                {% with first=product.first_image second=product.second_image %}
                    {% if first %}
                        <img class="lazyload img-product"
                             data-src="{{ first.image.url }}"
                             src="{{ first.image.url }}"
                             alt="{{ product.name }}">
                    {% else %}
                        <img class="img-product" src="{% static 'images/no-image.jpg' %}" alt="No Image">
                    {% endif %}

                    {% if second %}
                        <img class="lazyload img-hover"
                             data-src="{{ second.image.url }}"
                             src="{{ second.image.url }}"
                             alt="{{ product.name }}">
                    {% endif %}
                {% endwith %}
            </a>
        </div>
        <div class="card-product-info">
            <a href="{{ product.get_absolute_url }}" class="title link">{{ product.name }}</a>
            <span class="price">
                {% if product.discounted_price %}
                    <del>${{ product.price }}</del>
                    <ins>${{ product.discounted_price }}</ins>
                {% else %}
                    ${{ product.price }}
                {% endif %}
            </span>
        </div>
    </div>
</div>














                        </div>
                    </div>
                    <div class="nav-sw nav-next-slider nav-next-product box-icon w_46 round"><span
                            class="icon icon-arrow-left"></span></div>
                    <div class="nav-sw nav-prev-slider nav-prev-product box-icon w_46 round"><span
                            class="icon icon-arrow-right"></span></div>
                    <div class="sw-dots style-2 sw-pagination-product justify-content-center"></div>
                </div>
            </div>
        </section>
        <!-- /product -->
   {% endif %}     


        <!-- recent -->
        {% if recently_viewed_products %}
        <section class="flat-spacing-4 pt_0">
            <div class="container">
                <div class="flat-title">
                    <span class="title">Recently Viewed</span>
                </div>
                <div class="hover-sw-nav hover-sw-2">
                    <div dir="ltr" class="swiper tf-sw-recent wrap-sw-over" data-preview="4" data-tablet="3"
                        data-mobile="2" data-space-lg="30" data-space-md="30" data-space="15" data-pagination="1"
                        data-pagination-md="1" data-pagination-lg="1">
                        <div class="swiper-wrapper">



{% for recent in recently_viewed_products %}
<div class="swiper-slide" lazy="true">
  <div class="card-product">
    <div class="card-product-wrapper">
      <a href="{{ recent.get_absolute_url }}" class="product-img">
        {% if recent.first_image %}
          <img class="lazyload img-product"
               data-src="{{ recent.first_image.image.url }}"
               src="{{ recent.first_image.image.url }}"
               alt="{{ recent.name }}">
        {% endif %}
        {% if recent.second_image %}
          <img class="lazyload img-hover"
               data-src="{{ recent.second_image.image.url }}"
               src="{{ recent.second_image.image.url }}"
               alt="{{ recent.name }}">
        {% endif %}
      </a>
    </div>
    <div class="card-product-info">
      <a href="{{ recent.get_absolute_url }}" class="title link">{{ recent.name }}</a>
      {% if recent.discounted_price %}
        <span class="price"><del>${{ recent.price }}</del> ${{ recent.discounted_price }}</span>
      {% else %}
        <span class="price">${{ recent.price }}</span>
      {% endif %}
    </div>
  </div>
</div>
{% empty %}
<p class="p-3 text-muted">Browse a few items to see them here.</p>
{% endfor %}







                           
                        </div>
                    </div>
                    <div class="nav-sw nav-next-slider nav-next-recent box-icon w_46 round"><span
                            class="icon icon-arrow-left"></span></div>
                    <div class="nav-sw nav-prev-slider nav-prev-recent box-icon w_46 round"><span
                            class="icon icon-arrow-right"></span></div>
                    <div class="sw-dots style-2 sw-pagination-recent justify-content-center"></div>
                </div>
            </div>
        </section>
        {% endif %}
        <!-- /recent -->
        

    </div>




<!-- modal ask_question -->
<div 
  class="modal fade modalCentered modalDemo tf-product-modal modal-part-content" 
  id="ask_question" 
  tabindex="-1" 
  aria-labelledby="askQuestionTitle" 
  aria-hidden="true"
>
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="header">
                <div class="demo-title" id="askQuestionTitle">Ask a question</div>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>

            </div>
            <div class="overflow-y-auto p-4">
                <form id="ask-question-form" class="form-contact text-start" method="post" action="{% url 'newsletter:submit_question' %}">
                    {% csrf_token %}
                    
                    <fieldset class="mb-3">
                        <label for="ask-name">Name *</label>
                        <input type="text" id="ask-name" name="name" class="form-control" required placeholder="Your name" autocomplete="name">
                    </fieldset>
                    
                    <fieldset class="mb-3">
                        <label for="ask-email">Email *</label>
                        <input type="email" id="ask-email" name="email" class="form-control" required placeholder="Your email" autocomplete="email">
                    </fieldset>

                    <fieldset class="mb-3">
                        <label for="ask-phone">Phone number</label>
                        <input type="tel" id="ask-phone" name="phone" class="form-control" placeholder="Your phone number" autocomplete="tel">
                    </fieldset>
                    
                    <fieldset class="mb-4">
                        <label for="ask-message">Message *</label>
                        <textarea id="ask-message" name="message" class="form-control" rows="4" required placeholder="Your message"></textarea>
                    </fieldset>
                    
                    <div class="send-wrap">
                        <button type="submit" class="tf-btn w-100 btn-fill justify-content-center fw-6 fs-16 flex-grow-1 animate-hover-btn">
                            <span>Send</span>
                        </button>
                    </div>
                </form>

                <div id="ask-question-feedback" class="mt-3 text-success d-none fw-semibold" role="alert" aria-live="polite">
                    Thank you! Your question has been sent.
                </div>
            </div>
        </div>
    </div>
</div>
<!-- /modal ask_question -->







    <!-- modal delivery_return -->
    <div class="modal modalCentered fade modalDemo tf-product-modal modal-part-content" id="delivery_return">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="header">
                    <div class="demo-title">Shipping & Delivery</div>
                    <span class="icon-close icon-close-popup" data-bs-dismiss="modal"></span>
                </div>
                <div class="overflow-y-auto">
                    <div class="tf-product-popup-delivery">
                        <div class="title">Delivery</div>
                        <p class="text-paragraph">All orders shipped with UPS Express.</p>
                        <p class="text-paragraph">Always free shipping for orders over US $250.</p>
                        <p class="text-paragraph">All orders are shipped with a UPS tracking number.</p>
                    </div>
                    <div class="tf-product-popup-delivery">
                        <div class="title">Returns</div>
                        <p class="text-paragraph">Items returned within 14 days of their original shipment date in same
                            as new condition will be eligible for a full refund or store credit.</p>
                        <p class="text-paragraph">Refunds will be charged back to the original form of payment used for
                            purchase.</p>
                        <p class="text-paragraph">Customer is responsible for shipping charges when making returns and
                            shipping/handling fees of original purchase is non-refundable.</p>
                        <p class="text-paragraph">All sale items are final purchases.</p>
                    </div>
                    <div class="tf-product-popup-delivery">
                        <div class="title">Help</div>
                        <p class="text-paragraph">Give us a shout if you have any other questions and/or concerns.</p>
                        <p class="text-paragraph">Email: <a href="mailto:contact@domain.com"
                                aria-describedby="a11y-external-message"><span
                                    class="__cf_email__">contact@domain.com</span></a></p>
                        <p class="text-paragraph mb-0">Phone: +1 (23) 456 789</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /modal delivery_return -->




    <!-- modal share social -->
    <div class="modal modalCentered fade modalDemo tf-product-modal modal-part-content" id="share_social">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="header">
                    <div class="demo-title">Share</div>
                    <span class="icon-close icon-close-popup" data-bs-dismiss="modal"></span>
                </div>
                <div class="overflow-y-auto">


                    <ul class="tf-social-icon d-flex gap-10">
                    {% for link in social_links %}
                        <li>
                        <a href="{{ link.url }}" 
                            class="box-icon w_34 round social-{{ link.name|lower }} bg_line" 
                            target="_blank" 
                            rel="noopener noreferrer">
                            <i class="{{ link.icon_class }}"></i>
                        </a>
                        </li>
                    {% endfor %}
                    </ul>



                    
                    <form class="form-share" method="post" accept-charset="utf-8">
  <fieldset>
    <input type="text"
           value="{{ share_url }}"
           readonly
           tabindex="0"
           aria-required="true"
           class="form-control" />
  </fieldset>
  <div class="button-submit">
    <button class="tf-btn btn-sm radius-3 btn-fill btn-icon animate-hover-btn" type="button" onclick="copyToClipboard(this)">
      Copy
    </button>
  </div>
</form>



                </div>
            </div>
        </div>
    </div>
    <!-- /modal share social -->
    <!-- gotop -->
    <button id="goTop">
        <span class="border-progress"></span>
        <span class="icon icon-arrow-up"></span>
    </button>
    <!-- /gotop -->

    
    

   
    


    <!-- shoppingCart -->
    
    
    <!-- /shoppingCart -->
    

   
   


    <!-- Variation Image Modal -->
<div class="modal fade" id="variationImageModal" tabindex="-1" aria-labelledby="variationImageModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-body p-0 text-center">
        <img id="variationModalImg" src="" alt="" class="img-fluid w-100">
        <div id="variationModalCaption" class="py-2 fw-semibold bg-light text-dark border-top"></div>
      </div>
    </div>
  </div>
</div>


<!-- outside vest and shirt modal -->
<div class="modal fade" id="zoomModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content bg-transparent border-0">
      <img id="zoomModalImage" src="" class="img-fluid rounded shadow">
    </div>
  </div>
</div>



<script>
  document.addEventListener('DOMContentLoaded', function () {
    const modal = new bootstrap.Modal(document.getElementById('variationImageModal'));
    const modalImg = document.getElementById('variationModalImg');
    const modalCaption = document.getElementById('variationModalCaption');

    document.querySelectorAll('.customization-group img').forEach(img => {
      img.style.cursor = 'zoom-in';
      img.addEventListener('click', function () {
        modalImg.src = this.src;
        const caption = this.closest('label')?.querySelector('.small')?.innerText || '';
        modalCaption.textContent = caption;
        modal.show();
      });
    });
  });
</script>

<script>
  function showZoomModal(img) {
    const modalImg = document.getElementById('zoomModalImage');
    modalImg.src = img.src;
    new bootstrap.Modal(document.getElementById('zoomModal')).show();
  }
</script>




<!-- modal ask_question -->

<script>
document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("ask-question-form");
    const feedback = document.getElementById("ask-question-feedback");

    form.addEventListener("submit", function (e) {
        e.preventDefault();

        const formData = new FormData(form);

        fetch(form.action, {
            method: "POST",
            headers: {
                "X-CSRFToken": formData.get('csrfmiddlewaretoken'),
                "X-Requested-With": "XMLHttpRequest",  // good practice for AJAX detection
            },
            body: formData
        })
        .then(res => {
            if (!res.ok) return res.json().then(err => Promise.reject(err));
            return res.json();
        })
        .then(data => {
            if (data.status === 'success') {
                form.reset();
                feedback.classList.remove("d-none");

                setTimeout(() => {
                    feedback.classList.add("d-none");
                    const modal = bootstrap.Modal.getInstance(document.getElementById('ask_question'));
                    modal.hide();
                }, 2500);
            } else {
                alert(data.message || "Something went wrong.");
            }
        })
        .catch(err => {
            alert(err.message || "Failed to send your question. Please try again.");
            console.error(err);
        });
    });
});








</script>





<!-- share social media -->
<script>
  function copyToClipboard(button) {
    const input = button.closest('form').querySelector('input');
    input.select();
    input.setSelectionRange(0, 99999); // For iOS
    navigator.clipboard.writeText(input.value).then(() => {
      button.innerText = "Copied!";
      setTimeout(() => button.innerText = "Copy", 2000);
    });
  }
</script>







    

    

{% endblock content %}