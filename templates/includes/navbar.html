{% load static %}
{% load static_pages %}

<!-- RTL -->
    <!-- <a href="javascript:void(0);" id="toggle-rtl" class="tf-btn animate-hover-btn btn-fill">RTL</a> -->
    <!-- /RTL  -->

    <!-- preload -->
    <div class="preload preload-container">
        <div class="preload-logo">
            <div class="spinner"></div>
        </div>
    </div>
    <!-- /preload -->

<!--            ***************        Header            *******************                     -->

<div id="wrapper">
    <!-- Top Bar -->
    <div class="tf-top-bar bg_white line">
        <div class="px_15 lg-px_40">
            <div class="tf-top-bar_wrap grid-3 gap-30 align-items-center">
                <ul class="tf-top-bar_item tf-social-icon d-flex gap-10">
                    <li><a href="#" class="box-icon w_28 round social-facebook bg_line"><i
                                class="icon fs-12 icon-fb"></i></a></li>
                    <li><a href="#" class="box-icon w_28 round social-twiter bg_line"><i
                                class="icon fs-10 icon-Icon-x"></i></a></li>
                    <li><a href="#" class="box-icon w_28 round social-instagram bg_line"><i
                                class="icon fs-12 icon-instagram"></i></a></li>
                    <li><a href="#" class="box-icon w_28 round social-tiktok bg_line"><i
                                class="icon fs-12 icon-tiktok"></i></a></li>
                    <li><a href="#" class="box-icon w_28 round social-pinterest bg_line"><i
                                class="icon fs-12 icon-pinterest-1"></i></a></li>
                </ul>
                <div class="text-center overflow-hidden">
                    <div dir="ltr" class="swiper tf-sw-top_bar" data-preview="1" data-space="0" data-loop="true"
                        data-speed="1000" data-delay="8000">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <p class="top-bar-text fw-5">Welcome To My Tailor</p>
                            </div>
                            <div class="swiper-slide">
                                <p class="top-bar-text fw-5">Summer sale discount off 70%</p>
                            </div>
                            <div class="swiper-slide">
                                <p class="top-bar-text fw-5">Time to refresh your wardrobe.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="top-bar-language tf-cur justify-content-end">


                    <div class="tf-currencies">
                        <select class="image-select center style-default type-currencies">
                            <option data-thumbnail="images/country/fr.svg">EUR € | France</option>
                            <option data-thumbnail="images/country/de.svg">EUR € | Germany</option>
                            <option selected data-thumbnail="images/country/us.svg">USD $ | United States</option>
                            <option data-thumbnail="images/country/vn.svg">VND ₫ | Vietnam</option>
                        </select>
                    </div>
                    <div class="tf-languages">
                        <select class="image-select center style-default type-languages">
                            <option>English</option>
                            <option>العربية</option>
                            <option>简体中文</option>
                            <option>اردو</option>
                        </select>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <!-- /Top Bar -->

    

    <!--         ************* header navbar ************         -->
        <!-- Header -->
        <header id="header" class="header-default">
            <div class="px_15 lg-px_40">
                <div class="row wrapper-header align-items-center">
                    <div class="col-md-4 col-3 tf-lg-hidden">
                        <a href="#mobileMenu" data-bs-toggle="offcanvas" aria-controls="offcanvasLeft">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="16" viewBox="0 0 24 16"
                                fill="none">
                                <path
                                    d="M2.00056 2.28571H16.8577C17.1608 2.28571 17.4515 2.16531 17.6658 1.95098C17.8802 1.73665 18.0006 1.44596 18.0006 1.14286C18.0006 0.839753 17.8802 0.549063 17.6658 0.334735C17.4515 0.120408 17.1608 0 16.8577 0H2.00056C1.69745 0 1.40676 0.120408 1.19244 0.334735C0.978109 0.549063 0.857702 0.839753 0.857702 1.14286C0.857702 1.44596 0.978109 1.73665 1.19244 1.95098C1.40676 2.16531 1.69745 2.28571 2.00056 2.28571ZM0.857702 8C0.857702 7.6969 0.978109 7.40621 1.19244 7.19188C1.40676 6.97755 1.69745 6.85714 2.00056 6.85714H22.572C22.8751 6.85714 23.1658 6.97755 23.3801 7.19188C23.5944 7.40621 23.7148 7.6969 23.7148 8C23.7148 8.30311 23.5944 8.59379 23.3801 8.80812C23.1658 9.02245 22.8751 9.14286 22.572 9.14286H2.00056C1.69745 9.14286 1.40676 9.02245 1.19244 8.80812C0.978109 8.59379 0.857702 8.30311 0.857702 8ZM0.857702 14.8571C0.857702 14.554 0.978109 14.2633 1.19244 14.049C1.40676 13.8347 1.69745 13.7143 2.00056 13.7143H12.2863C12.5894 13.7143 12.8801 13.8347 13.0944 14.049C13.3087 14.2633 13.4291 14.554 13.4291 14.8571C13.4291 15.1602 13.3087 15.4509 13.0944 15.6653C12.8801 15.8796 12.5894 16 12.2863 16H2.00056C1.69745 16 1.40676 15.8796 1.19244 15.6653C0.978109 15.4509 0.857702 15.1602 0.857702 14.8571Z"
                                    fill="currentColor"></path>
                            </svg>
                        </a>
                    </div>
                    <div class="col-xl-3 col-md-4 col-6">
                        <a href="{% url 'home:home' %}" class="logo-header">
                            <img src="{% static 'images/logo/tailor-logo.png' %}" alt="logo" class="logo">
                        </a>
                    </div>
                    <div class="col-xl-6 tf-md-hidden">
                        <nav class="box-navigation text-center">
                            <ul class="box-nav-ul d-flex align-items-center justify-content-center gap-30">
                                
                                {% for main in links %}

                                

                                <li class="menu-item">
                                    <a href="{{ main.get_absolute_url }}" class="item-link">{{ main.name }}<i class="icon icon-arrow-down"></i></a>
                                    <div class="sub-menu mega-menu">
                                        <div class="container">
                                            <div class="row">

                                                {% for category in main.categories.all %}


                                                <div class="col-lg-2">
                                                    <div class="mega-menu-item">
                                                        <div class="menu-heading">
                                                            <a href="{{ category.get_absolute_url }}">
                                                            {{ category.name }}</a>
                                                        </div>
                                                        <ul class="menu-list">

                                                            

                                                            {% for sub in category.subcategories.all %}

                                                            <li><a href="{{ sub.get_absolute_url }}"
                                                                    class="menu-link-text link">{{ sub.name }} ({{ sub.product_count }})</a></li>
                                                            
                                                            {% endfor %}
                                                            <br/>
                                                            
                                                        </ul>
                                                    </div>
                                                </div>
                                                

                                                {% endfor %}

                                                <!-- show only if main category is "Shop"-->
                                               
                                                {% comment "navbar latest arrival images" %}
                                                
                                               
                                                <!-- nave products display shop -->
                                                {% if main.name == "Shop" %} 
                                                
                                                <div class="col-lg-4">
                                                    <div class="menu-heading">Latest Arrivals</div>
                                                    <div class="hover-sw-nav hover-sw-2">
                                                        <div dir="ltr" class="swiper tf-product-header">
                                                            <div class="swiper-wrapper">

                                                            {% for product in navbar_products %}
                                                                <div class="swiper-slide" lazy="true">
                                                                    <div class="card-product">
                                                                        <div class="card-product-wrapper">
                                                                            <a href="{{ product.get_absolute_url }}" class="product-img">
                                                                                {% if product.first_image %}
                                                                                <img class="lazyload img-product"
                                                                                    data-src="{{ product.first_image.image.url }}"
                                                                                    src="{{ product.first_image.image.url }}"
                                                                                    alt="{{ product.name }}">

                                                                                {% else %}
                                                                                <img class="lazyload img-product"
                                                                                    data-src="{% static 'images/placeholder.png' %}"
                                                                                    src="{% static 'images/placeholder.png' %}"
                                                                                    alt="{{ product.name }}">
                                                                                {% endif %}

                                                                                {% if product.second_image %}
                                                                                <img class="lazyload img-hover"
                                                                                    data-src="{{ product.second_image.image.url}}"
                                                                                    src="{{ product.second_image.image.url}}"
                                                                                    alt="{{ product.name }}">
                                                                                {% else %}
                                                                                 <img class="lazyload img-hover"
                                                                                    data-src="{% static 'images/placeholder.png' %}"
                                                                                    src="{% static 'images/placeholder.png' %}"
                                                                                    alt="{{ product.name }}">
                                                                                {% endif %}
                                                                            </a>
                                                                            
                                                                        </div>
                                                                        <div class="card-product-info">
                                                                            <a href="{{ product.get_absolute_url }}" class="title link">{{ product.name }}</a>
                                                                            <span class="price">
                                                                                {% if product.discounted_price %}
                                                                                <del>${{ product.price }}</del> ${{ product.discounted_price }}
                                                                                {% else %}
                                                                                ${{ product.price }}
                                                                                {% endif %}
                                                                            </span>
                                                                            
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                {% endfor %}

                                                                
                                                                
                                                            </div>
                                                        </div>
                                                        <div
                                                            class="nav-sw nav-next-slider nav-next-product-header box-icon w_46 round">
                                                            <span class="icon icon-arrow-left"></span>
                                                        </div>
                                                        <div
                                                            class="nav-sw nav-prev-slider nav-prev-product-header box-icon w_46 round">
                                                            <span class="icon icon-arrow-right"></span>
                                                        </div>
                                                    </div>
                                                </div>

                                                {% endif %}

                                                 {% endcomment %}

                                                {% if main.name == "Features" %}

                                                <!-- feature images display -->

                                                {% for category in navbar_categories %}

                                                <div class="col-lg-3">
                                                    <div class="collection-item hover-img">
                                                        <div class="collection-inner">
                                                            <a href="{{ category.get_absolute_url }}" class="collection-image img-style">
                                                                {% if category.image %}
                                                                <img class="lazyload"
                                                                    data-src="{{ category.image.url }}"
                                                                    src="{{ category.image.url }}"
                                                                    alt="{{ category.name }}">
                                                                {% endif %}
                                                            </a>
                                                            <div class="collection-content">
                                                                <a href="{{ category.get_absolute_url }}"
                                                                    class="tf-btn hover-icon btn-xl collection-title fs-16"><span>{{ category.name }}</span><i
                                                                        class="icon icon-arrow1-top-left"></i></a>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                               


                                                {% endfor %}  <!-- end of navbar categories image loop -->
                                                



                                                {% endif %}


                                                {% if main.name == "Trunk Shows" %}

                                                <!-- trunk shows images display -->

                                                {% for show in navbar_trunk_shows %}

                                                <div class="col-lg-3">
                                                    <div class="collection-item hover-img">
                                                        <div class="collection-inner">
                                                            <a href="{{ show.get_absolute_url }}" class="collection-image img-style">
                                                                {% if show.first_image %}
                                                                <img class="lazyload"
                                                                    data-src="{{ show.first_image.image.url }}"
                                                                    src="{{ show.first_image.image.url }}"
                                                                    alt="{{ show.name }}">
                                                                {% endif %}
                                                            </a>
                                                            
                                                        </div>
                                                    </div>
                                                </div>

                                               


                                                {% endfor %}  <!-- end of trunk shows loop -->
                                                



                                                {% endif %}

                                                

                                            </div>
                                        </div>
                                    </div>
                                </li>

                                {% endfor %}


                                <!--static pages-->
                                
                                
                                    {% get_static_pages as pages %}
                                    {% for page in pages %}
                                     <li class="menu-item position-relative">
                                        <a href="{% url 'content:static_page_detail' slug=page.slug %}" class="item-link">
                                        {{ page.title }}
                                       
                                        </a>
                                    </li>
                                    {% endfor %}

                                    <li class="menu-item position-relative">
                                        <a href="{% url 'blog:post_list' %}" class="item-link">Blog</a>
                                    </li>
                               

                                   

                                
                            </ul>
                        </nav>
                    </div>

                    <div class="col-xl-3 col-md-4 col-3">
                        <ul class="nav-icon d-flex justify-content-end align-items-center gap-20">
                            <li class="nav-search"><a href="#canvasSearch" data-bs-toggle="offcanvas"
                                    aria-controls="offcanvasLeft" class="nav-icon-item"><i
                                        class="icon icon-search"></i></a></li>

                            {% if request.user.is_authenticated %}

                            <li class="nav-account"><a href="{% url 'dashboard' %}">Dashboard</a></li>
                             <li class="nav-account">{{ user.first_name|default:user.username }}</li>
                             <form action="{% url 'logout' %}" method="post">
                                {% csrf_token %}
                              <li class="nav-account"><button type="submit" style="all: unset; cursor: pointer;">Logout</button></li>
                             </form>
                             
                            
                            {% else %}
                            <li class="nav-account"><a href="{% url 'login' %}" class="nav-icon-item"><i
                                        class="icon icon-account"></i></a></li>
                            {% endif %}
                           

                            <li class="nav-cart">
                                {% with total_items=cart|length %}
                                    {% if total_items > 0 %}
                                    <a href="{% url 'cart:cart_detail' %}" class="nav-icon-item">
                                        <i class="icon icon-bag"></i>
                                        <span class="count-box">{{ total_items }}</span>
                                    </a>
                                    {% else %}
                                      <a href="{% url 'cart:cart_detail' %}" class="nav-icon-item">
                                        <i class="icon icon-bag"></i>
                                        <span class="count-box">0</span>
                                    </a>
                                    {% endif %}
                                {% endwith %}
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </header>
        <!-- /Header -->


     <!--            ***************       End Header            *******************                     -->
